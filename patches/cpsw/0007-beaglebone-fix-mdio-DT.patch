From 002801649844860da347923ae545f4e5836c6a75 Mon Sep 17 00:00:00 2001
From: Koen Kooi <koen@dominion.thruhere.net>
Date: Thu, 2 Aug 2012 22:20:23 +0200
Subject: [PATCH 7/7] beaglebone: fix mdio DT

Signed-off-by: Koen Kooi <koen@dominion.thruhere.net>
---
 arch/arm/boot/dts/am335x-bone.dts |   15 +++++++--------
 1 files changed, 7 insertions(+), 8 deletions(-)

diff --git a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
index a6b0c8b..7b0a618 100644
--- a/arch/arm/boot/dts/am335x-bone.dts
+++ b/arch/arm/boot/dts/am335x-bone.dts
@@ -71,6 +71,11 @@
 		};
 	};
 
+	mdio: davinci_mdio@4a101000 {
+		compatible = "ti,davinci-mdio";
+		ti,hwmods = "davinci_mdio";
+	};
+
 	mac: ethernet@4A100000 {
 		compatible = "ti,cpsw";
 		ti,hwmods = "cpgmac0";
@@ -87,19 +92,13 @@
 		no_bd_ram = <0>;
 		rx_descs = <64>;
 		mac_control = <0x20>;
-		slaves = <2>;
+		slaves = <1>;
 		slave@0 {
 			slave_reg_ofs = <0x208>;
 			sliver_reg_ofs = <0xd80>;
-			phy_id = "davinci_mdio-0:00";
+			phy_id = "davinci_mdio.20-:00";
 			mac-address = [00 04 9F 01 1B B8];
 		};
-		slave@1 {
-			slave_reg_ofs = <0x308>;
-			sliver_reg_ofs = <0xdc0>;
-			phy_id = "davinci_mdio-0:01";
-			mac-address = [00 04 9F 01 1B B9];
-		};
 	};
 };
 
-- 
1.7.7.6

